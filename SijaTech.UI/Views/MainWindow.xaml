<Window x:Class="SijaTech.UI.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        xmlns:viewModels="clr-namespace:SijaTech.UI.ViewModels"
        Title="{Binding Title}" 
        Height="700" 
        Width="1000"
        MinHeight="600"
        MinWidth="800"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BackgroundBrush}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        TextElement.FontWeight="Regular"
        TextElement.FontSize="13"
        TextOptions.TextFormattingMode="Ideal"
        TextOptions.TextRenderingMode="Auto"
        FontFamily="{DynamicResource MaterialDesignFont}">

    <Window.DataContext>
        <viewModels:MainViewModel />
    </Window.DataContext>

    <materialDesign:DialogHost Identifier="RootDialog">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- Top Bar -->
            <materialDesign:Card Grid.Row="0"
                               materialDesign:ShadowAssist.ShadowDepth="Depth1"
                               Margin="0">
                <Grid Height="60">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!-- Logo and Title -->
                    <StackPanel Grid.Column="0" 
                              Orientation="Horizontal" 
                              VerticalAlignment="Center"
                              Margin="20,0">
                        <materialDesign:PackIcon Kind="Shield" 
                                               Width="32" 
                                               Height="32" 
                                               Foreground="{StaticResource PrimaryBrush}"
                                               VerticalAlignment="Center" />
                        <TextBlock Text="Sija Tech" 
                                 Style="{StaticResource Heading3Style}"
                                 VerticalAlignment="Center"
                                 Margin="12,0,0,0" />
                    </StackPanel>

                    <!-- Quick Actions -->
                    <StackPanel Grid.Column="2" 
                              Orientation="Horizontal" 
                              VerticalAlignment="Center"
                              Margin="0,0,20,0">
                        <Button Style="{StaticResource PrimaryButtonStyle}"
                              Command="{Binding QuickScanCommand}"
                              Margin="0,0,8,0">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Magnify" Width="16" Height="16" Margin="0,0,4,0" />
                                <TextBlock Text="Quick Scan" />
                            </StackPanel>
                        </Button>
                        <Button Style="{StaticResource SuccessButtonStyle}"
                              Command="{Binding QuickCleanCommand}">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Broom" Width="16" Height="16" Margin="0,0,4,0" />
                                <TextBlock Text="Quick Clean" />
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </Grid>
            </materialDesign:Card>

            <!-- Main Content -->
            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="250" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Navigation Sidebar -->
                <materialDesign:Card Grid.Column="0" 
                                   Style="{StaticResource NavigationCardStyle}"
                                   Margin="8,8,4,8">
                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel Margin="0,16">
                            <!-- Navigation Items -->
                            <Button Style="{StaticResource NavigationButtonStyle}"
                                  Command="{Binding NavigateToHomeCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="Home" Width="20" Height="20" Margin="0,0,12,0" />
                                    <TextBlock Text="System Cleaner" />
                                </StackPanel>
                            </Button>

                            <Button Style="{StaticResource NavigationButtonStyle}"
                                  Command="{Binding NavigateToSecurityCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="Security" Width="20" Height="20" Margin="0,0,12,0" />
                                    <TextBlock Text="Security Monitor" />
                                </StackPanel>
                            </Button>

                            <Button Style="{StaticResource NavigationButtonStyle}"
                                  Command="{Binding NavigateToRegistryCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="Registry" Width="20" Height="20" Margin="0,0,12,0" />
                                    <TextBlock Text="Registry Cleaner" />
                                </StackPanel>
                            </Button>

                            <Separator Margin="16,16" />

                            <Button Style="{StaticResource NavigationButtonStyle}"
                                  Command="{Binding NavigateToSettingsCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="Settings" Width="20" Height="20" Margin="0,0,12,0" />
                                    <TextBlock Text="Settings" />
                                </StackPanel>
                            </Button>

                            <Button Style="{StaticResource NavigationButtonStyle}"
                                  Command="{Binding ShowAboutCommand}">
                                <StackPanel Orientation="Horizontal">
                                    <materialDesign:PackIcon Kind="Information" Width="20" Height="20" Margin="0,0,12,0" />
                                    <TextBlock Text="About" />
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </ScrollViewer>
                </materialDesign:Card>

                <!-- Content Area -->
                <materialDesign:Card Grid.Column="1" 
                                   Style="{StaticResource BaseCardStyle}"
                                   Margin="4,8,8,8">
                    <ContentPresenter Content="{Binding CurrentView}" />
                </materialDesign:Card>
            </Grid>

            <!-- Status Bar -->
            <materialDesign:Card Grid.Row="2"
                               materialDesign:ShadowAssist.ShadowDepth="Depth1"
                               Margin="0">
                <Grid Height="40">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <!-- Status Message -->
                    <StackPanel Grid.Column="0" 
                              Orientation="Horizontal" 
                              VerticalAlignment="Center"
                              Margin="20,0">
                        <TextBlock Text="{Binding StatusMessage}" 
                                 Style="{StaticResource BodyMediumStyle}"
                                 VerticalAlignment="Center" />
                        <TextBlock Text="{Binding CurrentOperation}"
                                 Style="{StaticResource LabelMediumStyle}"
                                 VerticalAlignment="Center"
                                 Margin="16,0,0,0" />
                    </StackPanel>

                    <!-- Progress Indicator -->
                    <StackPanel Grid.Column="1" 
                              Orientation="Horizontal" 
                              VerticalAlignment="Center"
                              Margin="0,0,20,0"
                              Visibility="Collapsed">
                        <ProgressBar Width="100" 
                                   Height="4"
                                   Value="{Binding ProgressPercentage}"
                                   Maximum="100"
                                   VerticalAlignment="Center"
                                   Margin="0,0,8,0" />
                        <TextBlock Text="{Binding ProgressPercentage, StringFormat={}{0}%}" 
                                 Style="{StaticResource LabelSmallStyle}"
                                 VerticalAlignment="Center" />
                    </StackPanel>
                </Grid>
            </materialDesign:Card>
        </Grid>
    </materialDesign:DialogHost>
</Window>
